:root{--bg-color: #f8f9fa;--card-bg: #ffffff;--text-color: #212529;--text-muted: #6c757d;--border-color: #dee2e6;--primary: #17a2b8;--primary-hover: #138496;--correct: #28a745;--incorrect: #dc3545;--hover-bg: #e9ecef;--selected-text: #fff;--shadow-color: rgba(0, 0, 0, .05);--font-family: "Poppins", sans-serif;--border-radius: 12px}html[data-theme=dark]{--bg-color: #121212;--card-bg: #1e1e1e;--text-color: #e9ecef;--text-muted: #adb5bd;--border-color: #495057;--primary: #20c997;--primary-hover: #1baa80;--correct: #28a745;--incorrect: #e63946;--hover-bg: #343a40;--selected-text: #000;--shadow-color: rgba(0, 0, 0, .2)}*{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}body{font-family:var(--font-family);background-color:var(--bg-color);color:var(--text-color);line-height:1.7;padding:1rem;transition:background-color .3s ease,color .3s ease;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.container{max-width:800px;margin:0 auto;padding:1rem}header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border-color)}header h1{color:var(--primary);font-weight:600;font-size:1.75rem}.theme-toggle{background:transparent;border:1px solid var(--border-color);border-radius:50%;width:40px;height:40px;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:all .3s ease}.theme-toggle:hover{border-color:var(--primary);transform:rotate(15deg) scale(1.1)}.theme-toggle svg{color:var(--text-muted);width:20px;height:20px;transition:color .3s ease}.theme-toggle:hover svg{color:var(--primary)}.card{background-color:var(--card-bg);border-radius:var(--border-radius);box-shadow:0 4px 15px var(--shadow-color);padding:2rem;margin-bottom:2rem;transition:background-color .3s ease}.card h2{color:var(--primary);border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin:-2rem -2rem 1.5rem;padding:1.5rem 2rem;font-weight:500;font-size:1.5rem}.breadcrumbs{display:flex;align-items:center;gap:.5rem;margin-bottom:2rem;flex-wrap:wrap}.breadcrumb-link{background:none;border:none;color:var(--text-muted);cursor:pointer;font-size:1rem;font-family:inherit;transition:color .2s ease}.breadcrumb-link:hover{color:var(--primary)}.breadcrumb-link:disabled{color:var(--text-color);cursor:default;font-weight:500}.breadcrumb-separator{color:var(--text-muted)}.breadcrumb-current{font-weight:500;color:var(--text-color)}.selection-page{text-align:center}.selection-page h2{margin-bottom:2.5rem;font-weight:500;color:var(--text-color);font-size:1.8rem}.selection-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.choice-card{background-color:var(--card-bg);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:2rem;cursor:pointer;text-align:center;transition:all .25s ease;box-shadow:0 4px 6px var(--shadow-color);position:relative;overflow:hidden}.choice-card:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background-color:var(--primary);transform:translate(-100%);transition:transform .3s ease}.choice-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px var(--shadow-color);border-color:var(--border-color)}.choice-card:hover:before{transform:translate(0)}.choice-card .icon{display:block;font-size:2.5rem;margin-bottom:1rem;line-height:1}.choice-card h3{color:var(--text-color);font-size:1.25rem;margin:0 0 .5rem;font-weight:600;transition:color .3s ease}.choice-card:hover h3{color:var(--primary)}.choice-card p{color:var(--text-muted);font-size:.95rem;margin:0}.summary-content{display:grid;grid-template-columns:1fr 1fr;gap:2.5rem}.summary-content h3{margin-top:0;margin-bottom:1rem;color:var(--text-muted);font-weight:500;font-size:1.2rem}.vocabulary-table{width:100%;border-collapse:collapse}.vocabulary-table th,.vocabulary-table td{text-align:left;padding:.75rem;border-bottom:1px solid var(--border-color)}.vocabulary-table th{font-weight:500}.vocabulary-table tr:hover{background-color:var(--hover-bg)}.phrases-list{list-style-type:none;padding-left:0}.phrases-list li{border-left:3px solid var(--primary);padding:.75rem 1rem;margin-bottom:.75rem;background:var(--hover-bg);border-radius:0 8px 8px 0}.phrases-list li strong{display:block;margin-bottom:.25rem}.phrases-list li em{color:var(--text-muted);font-size:.9em}.grammar-tip-section{margin-top:2rem;padding:1.5rem;background-color:var(--bg-color);border-radius:var(--border-radius);border:1px solid var(--border-color)}.grammar-tip-section h3{margin-top:0;font-size:1.3rem;color:var(--primary);padding-bottom:.75rem;margin-bottom:1rem;border-bottom:1px solid var(--border-color)}.grammar-table{width:100%;border-collapse:collapse;margin:1.5rem 0;font-size:.95rem}.grammar-table th,.grammar-table td{text-align:left;padding:.75rem;border:1px solid var(--border-color)}.grammar-table th{background-color:var(--hover-bg);font-weight:500}.grammar-table strong{color:var(--primary)}.exercises{display:flex;flex-direction:column;gap:2rem}.exercise-item{border:1px solid var(--border-color);border-radius:var(--border-radius);padding:1.5rem}.exercise-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.sentence-number{font-weight:700;color:var(--primary);background-color:var(--hover-bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center}.action-icons{display:flex;gap:.5rem}.action-btn{background:transparent;border:none;cursor:pointer;color:var(--text-muted);padding:.5rem;transition:color .2s}.action-btn:hover{color:var(--primary)}.translation-box,.hint-box{background-color:var(--hover-bg);padding:.75rem 1rem;margin-bottom:1rem;border-radius:8px;border-left:3px solid var(--text-muted);font-size:.95rem}.sentence{font-weight:500;margin-bottom:1.5rem;font-size:1.2rem;line-height:1.8}.sentence u{text-decoration-color:var(--primary);text-decoration-thickness:2px;text-underline-offset:3px;font-weight:600}.blank-marker{display:inline-block;padding:.1em .5em;margin:0 .2em;background-color:var(--hover-bg);border-bottom:2px dashed var(--primary);border-radius:4px;font-weight:600;color:var(--primary)}.options,.image-options-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.75rem}.image-options-grid{grid-template-columns:1fr 1fr}.option-btn{background-color:var(--card-bg);border:1px solid var(--border-color);border-radius:8px;padding:.75rem 1rem;cursor:pointer;text-align:center;transition:all .2s ease-in-out;font-size:1rem;font-family:inherit;color:var(--text-color);font-weight:500}.option-btn:not(:disabled):hover{border-color:var(--primary);transform:translateY(-2px)}.option-btn.selected{background-color:var(--primary);color:var(--selected-text);border-color:var(--primary)}.option-btn.correct{background-color:var(--correct);color:var(--selected-text);border-color:var(--correct)}.option-btn.incorrect{background-color:var(--incorrect);color:var(--selected-text);border-color:var(--incorrect)}.option-btn:disabled{cursor:not-allowed;opacity:.8}.option-btn.correct:after{content:"✔";margin-left:8px;font-weight:700}.option-btn.incorrect:after{content:"✖";margin-left:8px;font-weight:700}.quiz-controls{margin-top:2.5rem;text-align:center}.control-btn{padding:.8rem 2.5rem;border-radius:50px;border:none;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .2s ease;letter-spacing:.5px;box-shadow:0 4px 10px #0000001a}.control-btn:disabled{background-color:var(--text-muted);cursor:not-allowed;opacity:.6}.check-btn{background-color:var(--primary);color:var(--selected-text)}.check-btn:hover:not(:disabled){background-color:var(--primary-hover);transform:translateY(-2px);box-shadow:0 6px 15px #00000026}.reset-btn{background-color:var(--text-muted);color:var(--selected-text)}.reset-btn:hover{background-color:var(--text-color)}.score-container{display:flex;justify-content:center;align-items:center;gap:1.5rem;font-size:1.2rem;font-weight:500}.double-options-container,.triple-options-container{display:grid;gap:1.5rem;margin-top:1rem}.double-options-container{grid-template-columns:1fr 1fr}.triple-options-container{grid-template-columns:1fr 1fr 1fr}.options-group{border:1px solid var(--border-color);border-radius:var(--border-radius);padding:1rem}.options-group-title{font-weight:500;color:var(--text-muted);text-align:center;margin-bottom:1rem}.translation-prompt{margin-bottom:1rem;color:var(--text-muted);text-align:center;font-size:1.05rem}.sentence-build-area{min-height:6rem;background-color:var(--bg-color);border:2px dashed var(--border-color);border-radius:var(--border-radius);padding:.75rem;margin-bottom:1.5rem;display:flex;flex-wrap:wrap;align-content:flex-start;gap:.75rem;position:relative;transition:border-color .3s ease}.sentence-build-area.correct{border-color:var(--correct);border-style:solid}.sentence-build-area.incorrect{border-color:var(--incorrect);border-style:solid}.placeholder-text{color:var(--text-muted);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.word-bank{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:.75rem;padding-top:1.5rem;border-top:1px solid var(--border-color);margin-top:1.5rem}.word-tile{background-color:var(--hover-bg);border:1px solid var(--border-color);border-radius:8px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;font-family:inherit;color:var(--text-color);transition:all .2s ease-in-out;box-shadow:0 2px 4px var(--shadow-color)}.word-tile:not(:disabled):hover{background-color:var(--border-color);transform:translateY(-2px);box-shadow:0 4px 8px var(--shadow-color)}.correct-sentence-display{width:100%;margin-top:.75rem;font-size:.95rem;color:var(--text-muted)}.correct-sentence-display strong{color:var(--correct)}.dialogue-container{display:flex;flex-direction:column;gap:1rem;margin-top:1.5rem}.chat-bubble{padding:.75rem 1.25rem;border-radius:20px;max-width:85%;line-height:1.5}.chat-bubble.agent{background-color:var(--hover-bg);border-bottom-left-radius:5px;align-self:flex-start}.user-turn{display:flex;flex-direction:column;gap:.75rem;align-items:flex-end}.chat-bubble.user-prompt{background-color:transparent;border:1px solid var(--border-color);border-bottom-right-radius:5px;align-self:flex-end;color:var(--text-muted);text-align:right}.chat-bubble.user-prompt strong{color:var(--primary)}.dialogue-options{display:flex;flex-direction:column;gap:.5rem;width:100%;max-width:450px}.dialogue-option-btn{text-align:left;width:100%}.exercise-image-container{width:100%;max-height:300px;background-color:var(--hover-bg);border-radius:var(--border-radius);margin-bottom:1.5rem;display:flex;justify-content:center;align-items:center;border:1px solid var(--border-color);overflow:hidden}.exercise-image{width:100%;height:100%;object-fit:cover}.image-placeholder{font-size:3rem;color:var(--text-muted)}footer{text-align:center;margin-top:3rem;color:var(--text-muted);font-size:.9rem}.loading-text{text-align:center;font-size:1.5rem;color:var(--text-muted);padding:4rem 0}@media(max-width:768px){.container{padding:.5rem}header h1{font-size:1.5rem}.card{padding:1.5rem}.card h2{margin:-1.5rem -1.5rem 1.5rem;padding:1rem 1.5rem;font-size:1.3rem}.summary-content{grid-template-columns:1fr}.score-container{flex-direction:column;gap:1rem}.triple-options-container{grid-template-columns:1fr}}@media(max-width:600px){.double-options-container,.image-options-grid,.selection-grid{grid-template-columns:1fr}.chat-bubble{max-width:95%}.vocabulary-table{border:none}.vocabulary-table thead{display:none}.vocabulary-table tr{display:block;border:1px solid var(--border-color);border-radius:8px;margin-bottom:1rem;padding:1rem}.vocabulary-table td{display:block;border:none;padding:.25rem 0}.vocabulary-table td:first-child{font-weight:600;color:var(--text-color)}.vocabulary-table td:last-child{color:var(--text-muted);font-size:.9rem}.grammar-table{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;border:1px solid var(--border-color)}.grammar-table th,.grammar-table td{white-space:nowrap;padding:.5rem .75rem}}
